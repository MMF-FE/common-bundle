!function(t,e){for(var s in e)t[s]=e[s]}(window,function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e),s.d(e,"html2nodes",function(){return h});const i=s(2),n=s(3),o={align:!0,alt:!0,author:!0,autoplay:!0,class:!0,color:!0,colspan:!0,controls:!0,"data-src":!0,dir:!0,face:!0,height:!0,href:!0,id:!0,ignore:!0,loop:!0,muted:!0,name:!0,poster:!0,rowspan:!0,size:!0,span:!0,src:!0,start:!0,style:!0,type:!0,"unit-id":!0,width:!0},a={area:!0,base:!0,basefont:!0,br:!0,col:!0,circle:!0,command:!0,ellipse:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,keygen:!0,line:!0,link:!0,meta:!0,param:!0,path:!0,polygon:!0,polyline:!0,rect:!0,source:!0,stop:!0,track:!0,use:!0,wbr:!0};function r(t,e){this._cbs=t,this._callback=e,this._tagname="",this._attribname="",this._attribvalue="",this._attribs=null,this._stack=[],this._tokenizer=new i(this)}function h(t,e){return new Promise(function(s,i){try{let o="";t=t.replace(/<style.*?>([\s\S]*?)<\/style>/gi,function(){return o+=arguments[1],""}),new r(new n(o,e),t=>s(t)).write(t)}catch(t){return i(t)}})}r.prototype.ontext=function(t){this._cbs.ontext(t)},r.prototype.onopentagname=function(t){t=t.toLowerCase(),this._tagname=t,this._attribs={style:""},a[t]||this._stack.push(t)},r.prototype.onopentagend=function(){this._attribs&&(this._cbs.onopentag(this._tagname,this._attribs),this._attribs=null),a[this._tagname]&&this._cbs.onclosetag(this._tagname),this._tagname=""},r.prototype.onclosetag=function(t){if(t=t.toLowerCase(),this._stack.length&&!a[t]){var e=this._stack.lastIndexOf(t);if(-1!==e)for(e=this._stack.length-e;e--;)this._cbs.onclosetag(this._stack.pop());else"p"===t&&(this.onopentagname(t),this._closeCurrentTag())}else"br"!==t&&"hr"!==t&&"p"!==t||(this.onopentagname(t),this._closeCurrentTag())},r.prototype._closeCurrentTag=function(){let t=this._tagname;this.onopentagend(),this._stack[this._stack.length-1]===t&&(this._cbs.onclosetag(t),this._stack.pop())},r.prototype.onattribend=function(){this._attribvalue=this._attribvalue.replace(/&quot;/g,'"'),this._attribs&&o[this._attribname]&&(this._attribs[this._attribname]=this._attribvalue),this._attribname="",this._attribvalue=""},r.prototype.onend=function(){for(var t=this._stack.length;t>0;this._cbs.onclosetag(this._stack[--t]));this._callback({nodes:this._cbs.nodes,title:this._cbs.title,imgList:this._cbs.imgList})},r.prototype.write=function(t){this._tokenizer.parse(t)}},function(t,e){function s(t="",e={}){this.res=JSON.parse(JSON.stringify(e)),this._state="SPACE",this._buffer=t,this._sectionStart=0,this._index=0,this._name="",this._content="",this._list=[],this._comma=!1}s.prototype.SPACE=function(t){/[a-zA-Z.#]/.test(t)?(this._sectionStart=this._index,this._state="InName"):"@"==t?this._state="Ignore1":"/"==t&&(this._state="BeforeComment")},s.prototype.BeforeComment=function(t){"*"==t?this._state="InComment":(this._index--,this._state="SPACE")},s.prototype.InComment=function(t){"*"==t&&(this._state="AfterComment")},s.prototype.AfterComment=function(t){"/"==t?this._state="SPACE":(this._index--,this._state="InComment")},s.prototype.InName=function(t){"{"==t?(this._list.push(this._buffer.substring(this._sectionStart,this._index)),this._sectionStart=this._index+1,this._state="InContent"):","==t?(this._list.push(this._buffer.substring(this._sectionStart,this._index)),this._sectionStart=this._index+1,this._comma=!0):"."!=t&&"#"!=t||this._comma?/\s/.test(t)?(this._name=this._buffer.substring(this._sectionStart,this._index),this._state="NameSpace"):/[>:\[]/.test(t)?this._list.length?this._state="IgnoreName":this._state="Ignore1":this._comma=!1:this._buffer=this._buffer.splice(this._index,1," ")},s.prototype.NameSpace=function(t){"{"==t?(this._list.push(this._name),this._sectionStart=this._index+1,this._state="InContent"):","==t?(this._comma=!0,this._list.push(this._name),this._sectionStart=this._index+1,this._state="InName"):/\S/.test(t)&&(this._comma?(this._sectionStart=this._index,this._index--,this._state="InName"):this._list.length?this._state="IgnoreName":this._state="Ignore1")},s.prototype.InContent=function(t){if("}"==t){this._content=this._buffer.substring(this._sectionStart,this._index);for(let t of this._list)this.res[t]=(this.res[t]||"")+this._content;this._list=[],this._comma=!1,this._state="SPACE"}},s.prototype.IgnoreName=function(t){","==t?(this._sectionStart=this._index+1,this._state="InName"):"{"==t&&(this._sectionStart=this._index+1,this._state="InContent")},s.prototype.Ignore1=function(t){";"==t?(this._state="SPACE",this._sectionStart=this._index+1):"{"==t&&(this._state="Ignore2")},s.prototype.Ignore2=function(t){"}"==t?(this._state="SPACE",this._sectionStart=this._index+1):"{"==t&&(this._state="Ignore3")},s.prototype.Ignore3=function(t){"}"==t&&(this._state="Ignore2")},s.prototype.parse=function(){for(;this._index<this._buffer.length;this._index++)this[this._state](this._buffer[this._index]);return this.res},t.exports=s},function(t,e){function s(t){this._state="TEXT",this._buffer="",this._sectionStart=0,this._index=0,this._cbs=t}s.prototype.TEXT=function(t){var e=this._buffer.indexOf("<",this._index);-1!=e?(this._index=e,this._cbs.ontext(this._getSection()),this._state="BeforeTag",this._sectionStart=this._index):this._index=this._buffer.length},s.prototype.BeforeTag=function(t){switch(t){case"/":this._state="BeforeCloseTag";break;case"!":this._state="BeforeDeclaration";break;case"?":let e=this._buffer.indexOf(">",this._index);-1!=e?(this._index=e,this._sectionStart=this._index+1):this._sectionStart=this._index=this._buffer.length,this._state="TEXT";break;case">":this._state="TEXT";break;case"<":this._cbs.ontext(this._getSection()),this._sectionStart=this._index;break;default:/\s/.test(t)?this._state="TEXT":(this._state="InTag",this._sectionStart=this._index)}},s.prototype.InTag=function(t){("/"===t||">"===t||/\s/.test(t))&&(this._cbs.onopentagname(this._getSection()),this._state="BeforeAttrsName",this._index--)},s.prototype.BeforeAttrsName=function(t){">"===t?(this._cbs.onopentagend(),this._state="TEXT",this._sectionStart=this._index+1):"/"===t?this._state="InSelfCloseTag":/\s/.test(t)||(this._state="InAttrsName",this._sectionStart=this._index)},s.prototype.InAttrsName=function(t){("="===t||"/"===t||">"===t||/\s/.test(t))&&(this._cbs._attribname=this._getSection().toLowerCase(),this._sectionStart=-1,this._state="AfterAttrsName",this._index--)},s.prototype.AfterAttrsName=function(t){"="===t?this._state="BeforeAttrsValue":"/"===t||">"===t?(this._cbs.onattribend(),this._state="BeforeAttrsName",this._index--):/\s/.test(t)||(this._cbs.onattribend(),this._state="InAttrsName",this._sectionStart=this._index)},s.prototype.BeforeAttrsValue=function(t){'"'===t?(this._state="InAttrsValueDQ",this._sectionStart=this._index+1):"'"===t?(this._state="InAttrsValueSQ",this._sectionStart=this._index+1):/\s/.test(t)||(this._state="InAttrsValueNQ",this._sectionStart=this._index,this._index--)},s.prototype.InAttrsValueDQ=function(t){'"'===t&&(this._cbs._attribvalue+=this._getSection(),this._cbs.onattribend(),this._state="BeforeAttrsName")},s.prototype.InAttrsValueSQ=function(t){"'"===t&&(this._cbs._attribvalue+=this._getSection(),this._cbs.onattribend(),this._state="BeforeAttrsName")},s.prototype.InAttrsValueNQ=function(t){(/\s/.test(t)||">"===t)&&(this._cbs._attribvalue+=this._getSection(),this._cbs.onattribend(),this._state="BeforeAttrsName",this._index--)},s.prototype.BeforeCloseTag=function(t){/\s/.test(t)||(">"===t?this._state="TEXT":(this._state="InCloseTag",this._sectionStart=this._index))},s.prototype.InCloseTag=function(t){(">"===t||/\s/.test(t))&&(this._cbs.onclosetag(this._getSection()),this._state="AfterCloseTag",this._index--)},s.prototype.InSelfCloseTag=function(t){">"===t?(this._cbs.onopentagend(),this._state="TEXT",this._sectionStart=this._index+1):/\s/.test(t)||(this._state="BeforeAttrsName",this._index--)},s.prototype.AfterCloseTag=function(t){">"===t&&(this._state="TEXT",this._sectionStart=this._index+1)},s.prototype.BeforeDeclaration=function(t){this._state="-"==t?"InComment":"["==t?"BeforeCDATA1":"InDeclaration"},s.prototype.InDeclaration=function(t){var e=this._buffer.indexOf(">",this._index);-1!=e?(this._index=e,this._sectionStart=e+1):this._sectionStart=this._index=this._buffer.length,this._state="TEXT"},s.prototype.InComment=function(t){let e="-"==t?"--\x3e":">",s=this._buffer.indexOf(e,this._index);-1!=s?(this._index=s+e.length-1,this._sectionStart=this._index+1):this._sectionStart=this._index=this._buffer.length,this._state="TEXT"},s.prototype.BeforeCDATA1=function(t){this._state="C"==t?"BeforeCDATA2":"InDeclaration"},s.prototype.BeforeCDATA2=function(t){this._state="D"==t?"BeforeCDATA3":"InDeclaration"},s.prototype.BeforeCDATA3=function(t){this._state="A"==t?"BeforeCDATA4":"InDeclaration"},s.prototype.BeforeCDATA4=function(t){this._state="T"==t?"BeforeCDATA5":"InDeclaration"},s.prototype.BeforeCDATA5=function(t){this._state="A"==t?"InCDATA":"InDeclaration"},s.prototype.InCDATA=function(t){let e="["==t?"]]>":">",s=this._buffer.indexOf(e,this._index);-1!=s?(this._index=s+e.length-1,this._sectionStart=this._index+1):this._sectionStart=this._index=this._buffer.length,this._state="TEXT"},s.prototype.parse=function(t){for(this._buffer+=t;this._index<this._buffer.length;this._index++)this[this._state](this._buffer[this._index]);"TEXT"===this._state&&this._sectionStart!==this._index&&this._cbs.ontext(this._buffer.substr(this._sectionStart)),this._cbs.onend()},s.prototype._getSection=function(){return this._buffer.substring(this._sectionStart,this._index)},t.exports=s},function(t,e,s){const i=s(1),n=s(4).versionHigherThan("2.7.1"),o={a:0,abbr:1,ad:0,audio:0,b:1,blockquote:1,br:0,code:1,col:0,colgroup:0,dd:1,del:1,dl:1,dt:1,div:1,em:1,fieldset:0,font:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:0,i:1,img:1,ins:1,label:1,legend:0,li:0,ol:0,p:1,q:1,source:0,span:1,strong:1,sub:0,sup:0,table:0,tbody:0,td:0,tfoot:0,th:0,thead:0,tr:0,u:1,ul:0,video:1},a={address:!0,article:!0,aside:!0,body:!0,center:!0,cite:!0,footer:!0,header:!0,html:!0,nav:!0,pre:!0,section:!0},r={a:!0,abbr:!0,b:!0,big:!0,code:!0,del:!0,em:!0,font:!0,i:!0,ins:!0,label:!0,mark:!0,q:!0,s:!0,small:!0,span:!0,strong:!0,u:!0},h={area:!0,base:!0,basefont:!0,canvas:!0,circle:!0,command:!0,ellipse:!0,embed:!0,frame:!0,head:!0,iframe:!0,input:!0,isindex:!0,keygen:!0,line:!0,link:!0,map:!0,meta:!0,param:!0,path:!0,polygon:!0,polyline:!0,rect:!0,script:!0,stop:!0,textarea:!0,title:!0,track:!0,use:!0,wbr:!0};function c(t,e={}){this.imgList=[],this.imgIndex=0,this.nodes=[],this.title="",this._videoNum=0,this._audioNum=0,this._style=new i(t,function(t){return t.a="display:inline;color:#366092;word-break:break-all;"+(t.a||""),t.address="font-style:italic;"+(t.address||""),t.blockquote=t.blockquote||"background-color:#f6f6f6;border-left:3px solid #dbdbdb;color:#6c6c6c;padding:5px 0 5px 10px;",t.center="text-align:center;"+(t.center||""),t.cite="font-style:italic;"+(t.cite||""),t.code=t.code||"padding:0 1px 0 1px;margin-left:2px;margin-right:2px;background-color:#f8f8f8;border:1px solid #cccccc;border-radius:3px;",t.dd="margin-left:40px;"+(t.dd||""),t.img="max-width:100%;"+(t.img||""),t.mark="display:inline;background-color:yellow;"+(t.mark||""),t.pre="overflow:scroll;"+(t.pre||"background-color:#f6f8fa;padding:5px;border-radius:5px;"),t.s="display:inline;text-decoration:line-through;"+(t.s||""),t.u="display:inline;text-decoration:underline;"+(t.u||""),n||(a.caption=!0,t.big="display:inline;font-size:1.2em;"+(t.big||""),t.small="display:inline;font-size:0.8em;"+(t.small||""),t.pre="font-family:monospace;white-space:pre;"+t.pre),t}(e)).parse(),this._tagStack=[],this._whiteSpace=!1}n&&(o.bdi=0,o.bdo=0,o.caption=0,o.rt=0,o.ruby=0,h.rp=!0,o.big=1,o.small=1,o.pre=0,delete a.pre),c.prototype._addDomElement=function(t){("pre"==t.name||t.attrs&&/white-space\s*:\s*pre/.test(t.attrs.style))&&(this._whiteSpace=!0,t.pre=!0);let e=this._tagStack[this._tagStack.length-1];(e?e.children:this.nodes).push(t)},c.prototype._bubbling=function(){for(let e=this._tagStack.length-1;e>=0;e--){if(!o[this._tagStack[e].name])return this._tagStack[e].name;if(this._tagStack[e].continue=!0,e==this._tagStack.length-1)for(var t of this._tagStack[e].children)r[t.name]&&(t.continue=!0)}},c.prototype.onopentag=function(t,e){let s={children:[]},i=this._style[t]?this._style[t]+";":"";if(e.id&&(i+=this._style["#"+e.id]?this._style["#"+e.id]+";":""),e.class){for(var n of e.class.split(" "))i+=this._style["."+n]?this._style["."+n]+";":"";delete e.class}switch(t){case"div":case"p":e.align&&(e.style+=";text-align:"+e.align,delete e.align);break;case"img":e.width&&(e.style="width:"+e.width+(/[0-9]/.test(e.width[e.width.length-1])?"px":"")+";"+e.style,delete e.width),e["data-src"]&&(e.src=e.src||e["data-src"],delete e["data-src"]),!e.hasOwnProperty("ignore")&&e.src&&(-1!=this.imgList.indexOf(e.src)&&(e.src=e.src+"?index="+this.imgIndex++),this.imgList.push(e.src),"a"==this._bubbling()&&(e.ignore=""));break;case"font":if(t="span",e.color&&(e.style+=";color:"+e.color,delete e.color),e.face&&(e.style+=";font-family:"+e.face,delete e.face),e.size){var h=parseInt(e.size);h<1?h=1:h>7&&(h=7);let t=[10,13,16,18,24,32,48];e.style+=";font-size:"+t[h-1]+"px",delete e.size}break;case"a":case"ad":this._bubbling();break;case"video":case"audio":e.loop=e.hasOwnProperty("loop"),e.controls=e.hasOwnProperty("controls"),e.autoplay=e.hasOwnProperty("autoplay"),"video"==t&&(e.muted=e.hasOwnProperty("muted"),e.width&&(e.style="width:"+parseFloat(e.width)+"px;"+e.style,delete e.width),e.height&&(e.style="height:"+parseFloat(e.height)+"px;"+e.style,delete e.height)),e.id=t+ ++this["_"+t+"Num"],e.source=[],e.src&&e.source.push(e.src),e.controls||e.autoplay||console.warn("存在没有controls属性的"+t+"标签，可能导致无法播放",e),this._bubbling();break;case"source":let i=this._tagStack[this._tagStack.length-1];return!i||"video"!=i.name&&"audio"!=i.name||(i.attrs.source.push(e.src),i.attrs.src||(i.attrs.src=e.src)),void this._tagStack.push(s)}e.style=i+e.style,r[t]?this._tagStack.length&&!this._tagStack[this._tagStack.length-1].continue||(s.continue=!0):a[t]?t="div":o.hasOwnProperty(t)||(t="span"),s.name=t,s.attrs=e,this._addDomElement(s),this._tagStack.push(s)},c.prototype.ontext=function(t){if(!this._whiteSpace){if(!/\S/.test(t))return;t=t.replace(/\s+/g," ")}let e={text:t.replace(/&nbsp;/g," "),type:"text"};/&#*((?!sp|lt|gt).){2,5};/.test(t)&&(e.decode=!0),this._addDomElement(e)},c.prototype.onclosetag=function(t){let e=this._tagStack.pop();if(h[t]){if("title"==t)try{this.title=e.children[0].text}catch(t){}let s=this._tagStack[this._tagStack.length-1];(s?s.children:this.nodes).pop()}if(!(1!=e.children.length||"div"!=e.name||"div"!=e.children[0].name||/padding/.test(e.attrs.style)||/margin/.test(e.attrs.style)&&/margin/.test(e.children[0].attrs.style)||/display/.test(e.attrs.style)||/display/.test(e.children[0].attrs.style)||e.attrs.id&&e.children[0].attrs.id)){let t=this._tagStack.length?this._tagStack[this._tagStack.length-1].children:this.nodes,s=t.indexOf(e);/padding/.test(e.children[0].attrs.style)&&(e.children[0].attrs.style=";box-sizing:border-box;"+e.children[0].attrs.style),e.children[0].attrs.style=e.attrs.style+";"+e.children[0].attrs.style,e.children[0].attrs.id=(e.children[0].attrs.id||"")+(e.attrs.id||""),t[s]=e.children[0]}if(e.pre){for(var s of(this._whiteSpace=!1,this._tagStack))s.pre&&(this._whiteSpace=!0);delete e.pre}},t.exports=c},function(t,e,s){String.prototype.splice=function(t=0,e=0,s=""){return t<0&&(t=this.length+t),e<0&&(e=0),this.substring(0,t)+s+this.substring(t+e)},t.exports={versionHigherThan(t=""){if("weapp"!==process.env.TARO_ENV)return!0;var e=wx.getSystemInfoSync().SDKVersion.split("."),s=t.split(".");const i=Math.max(e.length,s.length);for(;e.length<i;)e.push("0");for(;s.length<i;)s.push("0");for(let t=0;t<i;t++){const i=parseInt(e[t]),n=parseInt(s[t]);if(i>n)return!0;if(i<n)return!1}return!0},html2nodes:(t,e)=>s(0)(t,e),css2object:(t,e)=>new(s(1))(t,e).parse()}}]));